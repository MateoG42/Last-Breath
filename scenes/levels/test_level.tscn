[gd_scene format=3 uid="uid://qcr7ymiyk2ff"]

[ext_resource type="PackedScene" uid="uid://bn0xhuc4th847" path="res://scenes/character/player.tscn" id="1_jbqir"]
[ext_resource type="Script" uid="uid://d3kb5g8e0jwtf" path="res://scenes/networking/map_spawner.gd" id="1_jmx14"]
[ext_resource type="Texture2D" uid="uid://ct3jpytw6v0k0" path="res://assets/prototyping/Light/texture_08.png" id="1_yautc"]
[ext_resource type="PackedScene" uid="uid://cmsakc5ydplqt" path="res://scenes/map_objects/hit_dummy/hit_dummy.tscn" id="2_fr1um"]
[ext_resource type="Texture2D" uid="uid://dl3g1bgmvbwc1" path="res://assets/prototyping/Light/texture_11.png" id="4_v45ci"]
[ext_resource type="PackedScene" uid="uid://iq7j8ho3twc3" path="res://scenes/map_objects/pickup.tscn" id="5_48ne7"]
[ext_resource type="Resource" uid="uid://csfygtfqqr2r0" path="res://resources/pickup_data/knife.tres" id="6_6xh4u"]
[ext_resource type="PackedScene" uid="uid://c461rnyjdl6om" path="res://scenes/map_objects/map_fog.tscn" id="8_7x1jh"]
[ext_resource type="PackedScene" uid="uid://csrvuayd6bf58" path="res://scenes/networking/network_handler.tscn" id="9_2mu0v"]
[ext_resource type="Script" uid="uid://bw5iw6ye75ly4" path="res://scenes/networking/network_handler.gd" id="10_jmx14"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_yautc"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_fr1um"]
sky_material = SubResource("ProceduralSkyMaterial_yautc")

[sub_resource type="Environment" id="Environment_v45ci"]
background_mode = 2
sky = SubResource("Sky_fr1um")
tonemap_mode = 2
glow_enabled = true
volumetric_fog_enabled = true
volumetric_fog_density = 0.0
volumetric_fog_albedo = Color(0.17224759, 0.6760837, 0.19595665, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fr1um"]
albedo_texture = ExtResource("1_yautc")
uv1_triplanar = true

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_yautc"]
data = PackedVector3Array(-5, -0.5, 5, -5, -0.5, -5, -5, 0.5, -5, 5, -0.5, -5, -5, -0.5, -5, -5, -0.5, 5, -5, 0.5, -5, -5, -0.5, -5, 5, -0.5, -5, -5, 0.5, -5, -5, 0.5, 5, -5, -0.5, 5, -5, -0.5, 5, -5, 0.5, 5, 5, 0.5, 5, 5, 0.5, 5, -5, 0.5, 5, -5, 0.5, -5, -5, -0.5, 5, 5, -0.5, 5, 5, -0.5, -5, 5, 0.5, 5, 5, -0.5, 5, -5, -0.5, 5, 5, -0.5, -5, 5, -0.5, 5, 5, 0.5, 5, 5, -0.5, -5, 5, 0.5, -5, -5, 0.5, -5, -5, 0.5, -5, 5, 0.5, -5, 5, 0.5, 5, 5, 0.5, 5, 5, 0.5, -5, 5, -0.5, -5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_48ne7"]
albedo_texture = ExtResource("4_v45ci")

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_v45ci"]
data = PackedVector3Array(-0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5)

[node name="Map" type="Node3D" unique_id=406985348]

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=611855784]
environment = SubResource("Environment_v45ci")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=1478382528]
transform = Transform3D(0.43365905, -0.69026506, 0.57920116, 0, 0.64278764, 0.76604444, -0.90107703, -0.3322021, 0.2787507, 0, 0, 0)
shadow_enabled = true

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="." unique_id=892195782]
_spawnable_scenes = PackedStringArray("uid://bn0xhuc4th847", "uid://iq7j8ho3twc3")
spawn_path = NodePath("..")
script = ExtResource("1_jmx14")
network_player = ExtResource("1_jbqir")
network_item = ExtResource("5_48ne7")

[node name="NetworkHandler" parent="." unique_id=732539666 node_paths=PackedStringArray("spawner") instance=ExtResource("9_2mu0v")]
script = ExtResource("10_jmx14")
spawner = NodePath("../MultiplayerSpawner")

[node name="HitDummy" parent="." unique_id=801627438 instance=ExtResource("2_fr1um")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.0653996, -0.11487025, 2.212031)

[node name="StaticBody3D" type="StaticBody3D" parent="." unique_id=2147361608]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
collision_layer = 2

[node name="CSGBox3D" type="CSGBox3D" parent="StaticBody3D" unique_id=1116642753]
material_override = SubResource("StandardMaterial3D_fr1um")
size = Vector3(10, 1, 10)

[node name="CSGBakedCollisionShape3D" type="CollisionShape3D" parent="StaticBody3D" unique_id=2022934229]
shape = SubResource("ConcavePolygonShape3D_yautc")

[node name="CSGBox3D2" type="CSGBox3D" parent="StaticBody3D" unique_id=1935790833]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.01034, 0.97852516, 2.464189)
material_override = SubResource("StandardMaterial3D_48ne7")

[node name="CSGBakedCollisionShape3D2" type="CollisionShape3D" parent="StaticBody3D" unique_id=850252386]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.01034, 0.97852516, 2.464189)
shape = SubResource("ConcavePolygonShape3D_v45ci")

[node name="Pickup" parent="." unique_id=947803268 instance=ExtResource("5_48ne7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.2396727, 0, 0)
item_data = ExtResource("6_6xh4u")

[node name="Pickup2" parent="." unique_id=1310148140 instance=ExtResource("5_48ne7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.4864694, 0, 1.2680216)
item_data = ExtResource("6_6xh4u")

[node name="MapFog" parent="." unique_id=1947249419 instance=ExtResource("8_7x1jh")]

[node name="Control" type="Control" parent="." unique_id=1378798182]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Control" unique_id=1569572667]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -29.0
offset_top = -33.0
offset_right = 29.0
offset_bottom = 33.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="ServerBtn" type="Button" parent="Control/VBoxContainer" unique_id=684860399]
layout_mode = 2
text = "Server"

[node name="ClientBtn" type="Button" parent="Control/VBoxContainer" unique_id=116804212]
layout_mode = 2
text = "Client"

[connection signal="pressed" from="Control/VBoxContainer/ServerBtn" to="NetworkHandler" method="_on_server_btn_pressed"]
[connection signal="pressed" from="Control/VBoxContainer/ServerBtn" to="Control" method="hide"]
[connection signal="pressed" from="Control/VBoxContainer/ClientBtn" to="NetworkHandler" method="_on_client_btn_pressed"]
[connection signal="pressed" from="Control/VBoxContainer/ClientBtn" to="Control" method="hide"]
